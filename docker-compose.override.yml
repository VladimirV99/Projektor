version: '3.4'

services:
  projektor_mssql:
    container_name: projektor_mssql
    environment:
      - SA_PASSWORD=MatfRs2_MSSQL
      - ACCEPT_EULA=Y
    ports:
      - "1433:1433"
    volumes:
      - mssql_data:/var/opt/mssql/data
      - ./Services/Movies/Movies.API/Seed:/var/seed

  movies.api:
    container_name: movies.api
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - "ConnectionStrings:MoviesConnectionString=Server=projektor_mssql;Database=MoviesDb;User Id=sa;Password=MatfRs2_MSSQL;"
    depends_on:
      - projektor_mssql
    ports:
      - "5000:80"

  identity:
    container_name: identity
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - "ConnectionStrings:IdentityConnectionString=Server=projektor_mssql;Database=IdentityDb;User Id=sa;Password=MatfRs2_MSSQL;"
    depends_on:
      - projektor_mssql
    ports:
      - "5010:80"